# W2 数据类型、变量与常量、运算符与表达式

## 基础知识

- 计算机基本组成（运算器、控制器、存储器、输入输出）
- 进制、基数、位权
- 位与字节
- 2、8、16、10 进制之间的相互转换

## 数据类型

### 数据类型的分类

- 基本类型
  - 整型
    - 短整型　 `short int`
    - 整型　　 `int`
    - 长整型　 `long int`
    - 长长整型 `long long int`
  - 字符型 `char`
  - 浮点型
    - 单精度型　 `float`
    - 双精度型　 `double`
    - 长双精度型 `long double`
  - 布尔型 `bool`
- 派生类型
  - 指针类型　 `*`
  - 枚举类型　 `enum`
  - 数组类型　 `[]`
  - 结构体类型 `struct`
  - 共用体类型 `union`
  - 类类型　　 `class`
- 空类型 `void`

### 数据类型所占字节及表示范围

> [!note]
>
> 不同的编译系统中，不同数据类型的所占字节/表示范围可能不同。所有 C/C++ 编译器中不同整型数据的相互关系仅遵循一个基本原则：以 `int` 为基准，`short` 不大于 `int`，`long` 不小于 `int`，`long long` 不小于 `long`。
>
> 本课程中如不加以说明，均以下表为准。

|           类型 | 标识符                     | 字节 |          范围          |
| -------------: | -------------------------- | :--: | :--------------------: |
|           整型 | `[signed ]int`             |  4   |  $[-2^{31},2^{31}-1]$  |
|     无符号整型 | `unsigned [int]`           |  4   |     $[0,2^{32}-1]$     |
|         短整型 | `short [int]`              |  2   |  $[-2^{15},2^{15}-1]$  |
|   无符号短整型 | `unsigned short [int]`     |  2   |     $[0,2^{16}-1]$     |
|         长整型 | `long [int]`               |  4   |  $[-2^{31},2^{31}-1]$  |
|   无符号长整型 | `unsigned long [int]`      |  4   |     $[0,2^{32}-1]$     |
|       长长整型 | `long long [int]`          |  8   |  $[-2^{63},2^{63}-1]$  |
| 无符号长长整型 | `unsigned long long [int]` |  8   |     $[0,2^{64}-1]$     |
|         字符型 | `[signed] char`            |  1   |     $[-2^7,2^7-1]$     |
|   无符号字符型 | `unsigned char`            |  1   |      $[0,2^8-1]$       |
|       单精度型 | `float`                    |  4   |  $(-2^{128},2^{128})$  |
|       双精度型 | `double`                   |  8   | $(-2^{1024},2^{1024})$ |
|     长双精度型 | `long double`              |  8   | $(-2^{1024},2^{1024})$ |

> [!note]
>
> `long double` 是 16 位字长时代遗留下来的。在 32 位和 64 位计算机中，`long double` 与 `double` 完全等价，保留 `long double` 只是为了向后兼容。

使用 `sizeof(类型)` 来查询数据类型所占的字节。

```cpp
#include <iostream>
using namespace std;
int main() {
  cout << sizeof(int) << endl                // 4
       << sizeof(unsigned int) << endl       // 4
       << sizeof(long) << endl               // 4
       << sizeof(unsigned short) << endl     // 2
       << sizeof(unsigned long long) << endl // 8
       << sizeof(float) << endl              // 4
       << sizeof(long double) << endl;       // 16
  return 0;
}
```

可以使用 `climits` 打印数据类型的上下限：

```cpp {1}
#include <climits>
#include <iostream>
using namespace std;
int main() {
  cout << INT_MIN << endl   // -2147483648
       << UINT_MAX << endl  // 4294967295
       << LLONG_MAX << endl // 9223372036854775807
       << SHRT_MAX << endl; // 32767
  return 0;
}
```

- 整型中
  - 有符号整型使用补码方式存储
  - 无符号整型全为原码
- 浮点型中
  - 单精度为 1 位符号位、8 位阶码和 23 位尾数
  - 双精度为 1 位符号位、11 位阶码和 52 位尾数

与整型有关的内容可参考 [JavaScript 位运算 - 重温整数](../../前端相关/深入JavaScript/位运算#重温整数)，与浮点型有关的内容可参考 [JavaScript 数值存储与安全 - 存储格式](../../前端相关/深入JavaScript/数值存储与安全#存储格式)。
