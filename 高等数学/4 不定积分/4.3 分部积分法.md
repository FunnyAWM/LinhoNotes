# 分部积分法
设函数 $u = u(x)$ 与 $v = v(x)$ 具有连续导数，由函数乘积的导数公式：

$$
(uv)' = u'v + uv'
$$
得：
$$
uv' = (uv)' - u'v
$$
恒等式两边求不定积分，得：
$$
\int uv'\mathrm dx=uv-\int u'v\mathrm dx
$$
跟据 [4.2 中的第一类换元积分法](./4.2%20换元积分法#第一类换元积分法)，有
$$
\int u \mathrm dv=uv-\int v \mathrm du
$$

>[!note]
>
>使用分部积分法的条件：
>
>1. $v$ 容易求得。
>2. $\int v\mathrm {\rm d}u$ 比 $\int u\mathrm dv$ 容易积出。

> [!Tip]
>
> **选择简单的 $u$ **：通常选择一个易于微分的函数作为$u$。
>
> **选择易于积分的 ${\rm d}v$** ：选择一个容易计算其不定积分的部分作为 ${\rm d}v$。
>
> **顺序法则**：$u$ 常用的选择顺序为“LIPET”，即：
>
> - L - Logarithmic functions (对数函数)
> - I - Inverse trigonometric functions (反三角函数)
> - P - Polynomial functions (多项式)
> - E - Exponential functions (指数函数)
> - T - Trigonometric functions (三角函数)

---

例 1 求不定积分
$$
\int xe^x\mathrm dx
$$

解：

$$
\begin{align}
\int xe^x{\rm d}x
&=\int \textcolor{orange}x{\rm d}\textcolor{red}{e^x} \\
&=\textcolor{orange}x\textcolor{red}{e^x}-\int \textcolor{red}{e^x}{\rm d}\textcolor{orange}x \\
&=xe^x - e^x + C
\end{align}
$$

---

**例 2** 求不定积分
$$
\int x^2e^x{\rm d}x
$$
由分部积分法：
$$
\int x^2e^x\mathrm dx = x^2e^x-\int e^x\mathrm d(x^2)=x^2e^x-2\int xe^x\mathrm dx
$$
对 $\int xe^x\mathrm dx$ 再次使用分部积分法：
$$
\int x^2e^x\mathrm dx = x^2e^x-2(xe^x-e^x) + C=e^x(x^2 - 2x+2)+C
$$

---

**例 3** 求不定积分
$$
\int \frac{\ln x}{x}\mathrm dx
$$

由分部积分法
$$
\int \frac{\ln x}{x}\mathrm dx=\int \ln x \mathrm d(\ln x) = (\ln x)^2 - \int \frac{\ln x}{x}\mathrm dx  
$$

移项得
$$
\int \frac{\ln x}{x}\mathrm dx = \frac{(\ln x)^2 }{2}+ C
$$

---

**例 4** 求不定积分
$$
\int e^{\sqrt x}\mathrm dx
$$
令 $\sqrt x = t$，则 $x =t ^2,\mathrm dx = 2t\mathrm dt$
$$
\int e^{\sqrt x}\mathrm dx=\int e^t\mathrm dt^2=2\int te^t{\rm d}t
$$
这便转化为了例 1 中的问题。
$$
\int e^{\sqrt x}\mathrm dx = 2\int te^t\mathrm dt =2e^t(t-1) + C = 2e^{\sqrt x}(\sqrt x - 1) + C
$$
