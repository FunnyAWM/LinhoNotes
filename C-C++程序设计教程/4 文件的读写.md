# 4 文件的读写

## 文件的打开与关闭

```C
FILE *fp;
fp=fopen("File name","Method");
```

| Method | 访问形式   | 说明                                           |
| ------ | ---------- | ---------------------------------------------- |
| r      | 只读       | 只读不写，不存在则返回 NULL                    |
| w      | 只写       | 只写不读，若文件已存在则删去原有内容，否则新建 |
| a      | 追加写     | 在文件尾部追加数据，若文件不存在则新建         |
| r+     | 读写       | 可读可写，不存在则返回 NULL                    |
| w+     | 读写       | 可写可读，若文件已存在则删去原有内容，否则新建 |
| a+     | 读与追加写 | 可读，可在尾部追加写，若文件不存在则新建       |

默认在后面附加 t ，即以文本形式打开文件。

若在后面附加 b ，如 "rb", "wb", "r+b" 则以二进制打开

使用完文件后必须关闭，否则可能导致数据丢失。

```C
int fclose(FILE *p);
```

## 文件的读写

- 字符读 `char c; c=fgetc(fp);`
- 字符写 `int fputc(int c, FILE *p);`
- 读字符串函数 `fgets(内存区首地址, 读入字符数+1, fp);` **如** `char c[20]; fgets(c, n, fp);` 则从 fp 文件中读取 n-1 个字符存入 c
- 写字符串函数 `fputs(str, fp)` 如 `fputs(c,fp)` 则将字符串 c 写入 fp